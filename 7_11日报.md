#   ubuntu下(16.04)安装typora

- `sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys BA300B7755AFCFAE`这是一个可选的操作，但是建议还是添加上这一步。
- `sudo add-apt-repository 'deb http://typora.io linux/'`添加`typora`的远程仓库
- `sudo apt-get update`更新
- `sudo apt-get install typora` 安装
- 如果出现`typora`无法打开的情况，执行 `sudo apt install gconf2`

# java注解介绍

Java注解是附加在代码中的一些元信息，用于编译和运行时进行解析和使用，起到说明、配置的功能。注解不会影响代码的实际逻辑，仅仅起到辅助性的作用。包含在java.lang.annotation包中。注解的定义类似于接口的定义，使用@interface来定义，定义一个方法即为注解类型定义了一个元素，方法的声明不允许有参数或throw语句，返回值类型被限定为原始数据类型、字符串String、Class、enums、注解类型，或前面这些的数组，方法可以有默认值。注解并不直接影响代码的语义，但是他可以被看做是程序的工具或者类库。它会反过来对正在运行的程序语义有所影响。注解可以从源文件、class文件或者在运行时通过反射机制多种方式被读取。

```java
@Test("test")
public class AnnotationTest {
    public void test(){
    }
}
```



> 在我们的AnnotationTest类被编译后，在对应的AnnotationTest.class文件中会包含一个RuntimeVisibleAnnotations属性，由于这个注解是作用在类上，所以此属性被添加到类的属性集上。即Test注解的键值对value=test会被记录起来。而当JVM加载AnnotationTest.class文件字节码时，就会将RuntimeVisibleAnnotations属性值保存到AnnotationTest的Class对象中，于是就可以通过AnnotationTest.class.getAnnotation(Test.class)获取到Test注解对象，进而再通过Test注解对象获取到Test里面的属性值。



> 注解被编译后的本质就是一个继承Annotation接口的接口，所以@Test其实就是“public interface Test extends Annotation”，当我们通过AnnotationTest.class.getAnnotation(Test.class)调用时，JDK会通过动态代理生成一个实现了Test接口的对象，并把将RuntimeVisibleAnnotations属性值设置进此对象中，此对象即为Test注解对象，通过它的value()方法就可以获取到注解值。



> 通过字段名 = 的形式给字段赋值，如果没赋值，则使用缺省值。如果注解中只有一个属性，可以直接命名为“value”，使用时无需再标明属性名，

# AtomicInteger类的理解与使用

看两段代码，一段是**Integer**的，一段是**AtomicInteger**的:

``` java
public class Sample1 {
    private static Integer count = 0;
    synchronized public static void increment() {
        count++;
    }
}
```

```java
public class Sample2 {
    private static AtomicInteger count = new AtomicInteger(0);
    public static void increment() {
        count.getAndIncrement();
    }
}
```

>以上两段代码，在使用**Integer**的时候，必须加上**synchronized**保证不会出现并发线程同时访问的情况，而在**AtomicInteger**中却不用加上**synchronized**，在这里**AtomicInteger**是提供原子操作的
>
>**AtomicInteger**是一个提供原子操作的**Integer**类，这个类主要是用来替换java中的自增和自减操作,也就是i++和++i等运算,为什么要使用这个类了,主要是因为i++和i--等运算是线程不安全的,所以就需要这个类来替换通过线程安全的方式操作加减,适合于高并发的情况下使用。

#### 主要api

>1. AtomicInteger integer = new AtomicInteger()
>2. integer.set(1);
>3. int i = integer.get(); //获得值
>4. i = integer.incrementAndGet(); //先+1,然后在返回值,相当于++i
>5. i = integer.getAndIncrement();//先返回值,然后在+1,相当于i++
>6. i = integer.decrementAndGet();//先-1,然后在返回值,相当于--i
>7. i = integer.getAndDecrement();//先返回值,然后在-1,相当于i--
>8. i = integer.addAndGet(1);//先+n,然后在返回值,
>9. i = integer.getAndAdd(1);//先返回,然后+n

# rank业务本地url

>[http://localhost:8080/query](javascript:openUrl("http://localhost:8080/query"))?cityurl=beijing_city&coord=39.977312750325616%2C116.3058112211215&attrs=HGYGeXFY%2CvNfnYBK6%2CTDoolO-H%2CYRHLp-jc%2CHCEm2cI6%2CFB858E90%2Cer8Eevr%2C97sese%2CL6tg9Hfh%2CxaSZV4wU%2C08F7hM4i%2C0ceb3d84%2C63cqaq9v%2CDkx-z4hS%2CsYWEvpo%2CZO1FcGJH%2C4j_h0GFW%2C5_VrVbqO%2C378I2h80%2C89TUNr_%2Ca2390dp3%2CVAuXapLv%2CL0F4L3C1%2Cx0oSHP6u%2C2XkzJryU%2Cac437c70%2C505f385b&searchType=0&requestor=RT_WAP&showLmMessage=1&isCrawl=0&traceId=1531286972FJC2ABAdD15_h_hlist&bnbQ=&fromDate=2018-07-11&toDate=2018-07-12&showFullRoom=1&showNonPrice=1&kdh=0&limit=0%2C20&sort=&userName=lzzadcg9307&userId=184636194&lt=0&terminal=MOBILE&duration=&isBargainPrice=0&platform=60&gid=CE702DC8-1CDF-EEBC-E725-9067B9273779&uid=864032036207916&realUid=864032036207916&channel=city&q=亲子酒店&showAreaInfo=1&showAllCondition=1&source=APP&model=STF-AL10&cid=C5065&isIncludeExcess=1&needTaxiCoupon=1&commonSwitchBit=1&querySource=mob_hotel-60&abtest=%7B"realUid"%3A"864032036207916"%2C"uidInME"%3Afalse%2C"lat"%3A"39.977312750325616"%2C"lon"%3A"116.3058112211215"%2C"userId"%3A184636194%2C"platform"%3A"1"%2C"open"%3Atrue%2C"userType"%3A0%2C"qualificationBits"%3A27920168%2C"source"%3A"APP"%2C"pid"%3A"10010"%2C"versionId"%3A1220%2C"hotelCatom"%3A134%2C"mockSpecialExperiments"%3Afalse%2C"vid"%3A"60001220"%2C"catom"%3A"com.mqunar.atom.hotel_134"%2C"experimentList"%3A%5B%7B"id"%3A"180322_ho_other_child"%2C"bucket"%3A"C"%2C"env"%3Anull%7D%2C%7B"id"%3A"180416_ho_SBP"%2C"bucket"%3A"A"%2C"env"%3Anull%7D%5D%2C"versionControlBit"%3A63%7D&currCoord=39.977312750325616%2C116.3058112211215&isHourlyRoom=0&hourRec=1&onlyShowPrice=0&ugcCommentFilter=1&adultNum&childAgeList&logicBit=0&userIdentityBit=16&userBit=81920&countryType=1

​	今天在本地调试碰到的问题：

​	本地调试的时候碰到一个空指针异常问题，跟进断点后发现是cityClient为空了，最终跟进到HotelSearchInitListener中的contextInitialized方法中，注意：（**在Listener中加入断点，想要进入这个断点，需要重启服务，因为Listener只是在服务器启动的时候执行一次**）在这个方法中，抛出一个初始化cityClient失败，没有/home/q/***目录或文件，最终定位到配置文件中，city_data_dir设置为本地自己的目录，重启服务，ok























